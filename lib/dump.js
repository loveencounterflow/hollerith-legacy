(function() {
  var $, CND, D, HOLLERITH, alert, badge, chrs, cli_options, db, debug, docopt, dump_settings, echo, filename, help, info, join, limit, log, new_db, njs_path, prefix, rpr, urge, usage, version, warn, whisper, ƒ;

  njs_path = require('path');

  join = njs_path.join;

  CND = require('cnd');

  rpr = CND.rpr;

  badge = 'HOLLERITH/dump';

  log = CND.get_logger('plain', badge);

  info = CND.get_logger('info', badge);

  whisper = CND.get_logger('whisper', badge);

  alert = CND.get_logger('alert', badge);

  debug = CND.get_logger('debug', badge);

  warn = CND.get_logger('warn', badge);

  help = CND.get_logger('help', badge);

  urge = CND.get_logger('urge', badge);

  echo = CND.echo.bind(CND);

  D = require('pipedreams2');

  $ = D.remit.bind(D);

  new_db = require('level');

  HOLLERITH = require('./main');

  ƒ = CND.format_number.bind(CND);

  this._first_chrs_of = function(text, n) {

    /*
    for text in [ 'abc', '中國皇帝', 'a𪜄b', ]
      for n in [ 0 .. 5 ]
        debug '©DLOTs', n, rpr prefix_of text, n
     */
    var count, idx, last_idx;
    if (n <= 0) {
      return '';
    }
    count = 0;
    idx = -1;
    last_idx = text.length - 1;
    while (count < n) {
      if (idx >= last_idx) {
        break;
      }
      idx += +1;
      if ((text.codePointAt(idx)) > 0xffff) {
        idx += +1;
      }
      count += 1;
    }
    return [text.slice(0, +idx + 1 || 9e9), idx + 1];
  };


  /* TAINT code duplication */

  this._$dump_keys = function(db, input, settings) {
    var chrs, colors, count, limit;
    limit = settings.limit, colors = settings.colors, chrs = settings.chrs;
    count = 0;
    return $((function(_this) {
      return function(key, send, end) {
        var key_rpr;
        if (key != null) {
          count += +1;
          if (count < limit) {
            key_rpr = HOLLERITH.url_from_key(db, HOLLERITH._decode(db, key));
            if (colors) {
              log(CND.grey(ƒ(count)), CND.plum(key_rpr), CND.grey(key.slice(0, 10)));
            } else {
              echo(ƒ(count), key);
            }
            send(key);
          }
          if (count >= limit) {
            input.emit('end');
          }
        }
        if (end != null) {
          help("dumped " + (ƒ(count)) + " entries");
          return process.exit();
        }
      };
    })(this));
  };


  /* TAINT code duplication */

  this._$dump_prefixes = function(db, input, settings) {
    var chrs, colors, key_count, limit, prefix_count, prefixes, t0;
    limit = settings.limit, colors = settings.colors, chrs = settings.chrs;
    key_count = 0;
    prefix_count = 0;
    prefixes = {};
    t0 = +new Date();
    return $((function(_this) {
      return function(key, send, end) {
        var dt, dt_min, dt_s, key_rpr, prefix, ref, suffix_idx, t1;
        if (key != null) {
          key_count += +1;
          if (key_count < limit) {
            key_rpr = HOLLERITH.url_from_key(db, HOLLERITH._decode(db, key));
            ref = _this._first_chrs_of(key_rpr, chrs), prefix = ref[0], suffix_idx = ref[1];
            if (prefixes[prefix] == null) {
              prefix_count += +1;
              prefixes[prefix] = 1;
              if (colors) {
                log(CND.grey(ƒ(key_count)), (CND.plum(prefix)) + (CND.grey(key_rpr.slice(suffix_idx))));
              } else {
                echo(ƒ(key_count), prefix, key_rpr.slice(suffix_idx));
              }
              send(key);
            }
          }
          if (key_count >= limit) {
            input.emit('end');
          }
        }
        if (end != null) {
          t1 = +new Date();
          dt = t1 - t0;
          dt_s = (dt / 1000).toFixed(3);
          dt_min = (dt / 60000).toFixed(1);
          help("dumped " + (ƒ(key_count)) + " entries in " + dt_s + "s (" + dt_min + "min)");
          help("found " + (ƒ(prefix_count)) + " distinct prefixes with up to " + (ƒ(chrs)) + " characters");
          return process.exit();
        }
      };
    })(this));
  };

  this.dump = function(db, settings) {
    var input, mode, prefix, query, worker;
    mode = settings.mode, prefix = settings.prefix;
    switch (settings['mode']) {
      case 'keys':
        if (prefix != null) {
          query = HOLLERITH.new_query(db, prefix);
          urge('©g1y6J', query['gte']);
          urge('©g1y6J', query['lte']);
          input = db['%self'].createKeyStream(query);
        } else {
          input = db['%self'].createKeyStream();
        }
        worker = this._$dump_keys(db, input, settings);
        break;
      case 'prefixes':
        input = db['%self'].createKeyStream();
        worker = this._$dump_prefixes(db, input, settings);
        break;
      default:
        throw new Error("unknown mode " + (rpr(mode)));
    }
    return input.pipe(worker);
  };

  if (module.parent == null) {
    docopt = (require('coffeenode-docopt')).docopt;
    version = (require('../package.json'))['version'];
    filename = (require('path')).basename(__filename);
    usage = "Usage: " + filename + " <db-route> [--limit=N]\n       " + filename + " <db-route> ( [<prefix>] | keys [<prefix>] | prefixes [<chrs>] ) [--limit=N]\n\nOptions:\n  -l, --limit\n  -h, --help\n  -v, --version";

    /*
           #{filename} pos [--sample]
           #{filename} so [--db] [--limit] [--stdout] [<prefix>]
           #{filename} os [--db] [--limit] [--stdout] [<prefix>]
           #{filename} x
           #{filename} y
           #{filename} q <query0> [+|-] <query1>
           #{filename} sql
           #{filename} count
     */
    cli_options = docopt(usage, {
      version: version,
      help: function(left, collected) {
        urge(left);
        help(collected);
        help('\n' + usage);
        return process.exit();
      }
    });
    dump_settings = {
      limit: Infinity,
      mode: 'keys',
      colors: process.stdout.isTTY ? true : false,
      chrs: 3
    };
    dump_settings['route'] = cli_options['<db-route>'];
    if ((limit = cli_options['--limit'])) {
      dump_settings['limit'] = parseInt(limit, 10);
    }
    if (cli_options['prefixes']) {
      dump_settings['mode'] = 'prefixes';
    }
    if ((chrs = cli_options['<chrs>'])) {
      dump_settings['chrs'] = parseInt(chrs, 10);
    }
    if ((prefix = cli_options['<prefix>']) != null) {
      dump_settings['prefix'] = prefix;
    }
    db = HOLLERITH.new_db(dump_settings['route']);
    help("using LevelDB at " + dump_settings['route']);
    this.dump(db, dump_settings);
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,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O0dBdEpBO0FBQUEiLCJmaWxlIjoiZHVtcC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubmpzX3BhdGggICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJ3BhdGgnXG4jIG5qc19mcyAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlICdmcydcbmpvaW4gICAgICAgICAgICAgICAgICAgICAgPSBuanNfcGF0aC5qb2luXG4jLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbkNORCAgICAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlICdjbmQnXG5ycHIgICAgICAgICAgICAgICAgICAgICAgID0gQ05ELnJwclxuYmFkZ2UgICAgICAgICAgICAgICAgICAgICA9ICdIT0xMRVJJVEgvZHVtcCdcbmxvZyAgICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAncGxhaW4nLCAgICAgYmFkZ2VcbmluZm8gICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAnaW5mbycsICAgICAgYmFkZ2VcbndoaXNwZXIgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAnd2hpc3BlcicsICAgYmFkZ2VcbmFsZXJ0ICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAnYWxlcnQnLCAgICAgYmFkZ2VcbmRlYnVnICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAnZGVidWcnLCAgICAgYmFkZ2Vcbndhcm4gICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAnd2FybicsICAgICAgYmFkZ2VcbmhlbHAgICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAnaGVscCcsICAgICAgYmFkZ2VcbnVyZ2UgICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZ2V0X2xvZ2dlciAndXJnZScsICAgICAgYmFkZ2VcbmVjaG8gICAgICAgICAgICAgICAgICAgICAgPSBDTkQuZWNoby5iaW5kIENORFxuIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4jIGJ5dGV3aXNlICAgICAgICAgICAgICAgICAgPSByZXF1aXJlICdieXRld2lzZSdcbiMgdGhyb3VnaCAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJ3Rocm91Z2gyJ1xuIyBMZXZlbEJhdGNoICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnbGV2ZWwtYmF0Y2gtc3RyZWFtJ1xuIyBCYXRjaFN0cmVhbSAgICAgICAgICAgICAgID0gcmVxdWlyZSAnYmF0Y2gtc3RyZWFtJ1xuIyBwYXJhbGxlbCAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnY29uY3VycmVudC13cml0YWJsZSdcbkQgICAgICAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlICdwaXBlZHJlYW1zMidcbiQgICAgICAgICAgICAgICAgICAgICAgICAgPSBELnJlbWl0LmJpbmQgRFxuIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG5uZXdfZGIgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSAnbGV2ZWwnXG4jIG5ld19sZXZlbGdyYXBoICAgICAgICAgICAgPSByZXF1aXJlICdsZXZlbGdyYXBoJ1xuIyBkYiAgICAgICAgICAgICAgICAgICAgICAgID0gbmV3X2xldmVsZ3JhcGggJy90bXAvbGV2ZWxncmFwaCdcbkhPTExFUklUSCAgICAgICAgICAgICAgICAgPSByZXF1aXJlICcuL21haW4nXG7GkiAgICAgICAgICAgICAgICAgICAgICAgICA9IENORC5mb3JtYXRfbnVtYmVyLmJpbmQgQ05EXG5cbiMgJ0AnXG5cbiMgYmF0Y2hlZF9kYiAgPSBuZXcgTGV2ZWxCYXRjaCBsZXZlbF9kYlxuIyBpbnB1dCAgICAgICA9IEQuY3JlYXRlX3Rocm91Z2hzdHJlYW0oKVxuXG5cbiMgaW5wdXRcbiMgICAucGlwZSAkICgga2V5LCBzZW5kICkgPT5cbiMgICAgIHNlbmQgeyB0eXBlOiAncHV0Jywga2V5OiBrZXksIHZhbHVlOiAxLCB9XG4jICAgLnBpcGUgbmV3IEJhdGNoU3RyZWFtIHNpemU6IDEwMFxuIyAgIC5waXBlIHBhcmFsbGVsIGJhdGNoZWRfZGIsIDEwXG5cblxuIyB0cmlwbGUgPSB7IHN1YmplY3Q6IFwi5pytXCIsIHByZWRpY2F0ZTogXCJzdHJva2VvcmRlcjo6Zm9vYmFyXCIsIG9iamVjdDogXCIxMjM0NVwiIH1cbiMgZGIucHV0IHRyaXBsZSwgKCBlcnJvciApIC0+XG4jICAgdGhyb3cgZXJyb3IgaWYgZXJyb3I/XG5cblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AX2ZpcnN0X2NocnNfb2YgPSAoIHRleHQsIG4gKSAtPlxuICAjIyNcbiAgZm9yIHRleHQgaW4gWyAnYWJjJywgJ+S4reWci+eah+W4nScsICdh8KqchGInLCBdXG4gICAgZm9yIG4gaW4gWyAwIC4uIDUgXVxuICAgICAgZGVidWcgJ8KpRExPVHMnLCBuLCBycHIgcHJlZml4X29mIHRleHQsIG5cbiAgIyMjXG4gIHJldHVybiAnJyBpZiBuIDw9IDBcbiAgY291bnQgICAgID0gMFxuICBpZHggICAgICAgPSAtMVxuICBsYXN0X2lkeCAgPSB0ZXh0Lmxlbmd0aCAtIDFcbiAgd2hpbGUgY291bnQgPCBuXG4gICAgYnJlYWsgaWYgaWR4ID49IGxhc3RfaWR4XG4gICAgaWR4ICAgICs9ICsxXG4gICAgaWR4ICAgICs9ICsxIGlmICggdGV4dC5jb2RlUG9pbnRBdCBpZHggKSA+IDB4ZmZmZlxuICAgIGNvdW50ICArPSAxXG4gIHJldHVybiBbIHRleHRbIC4uIGlkeCBdLCBpZHggKyAxLCBdXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyMjIFRBSU5UIGNvZGUgZHVwbGljYXRpb24gIyMjXG5AXyRkdW1wX2tleXMgPSAoIGRiLCBpbnB1dCwgc2V0dGluZ3MgKSAtPlxuICB7IGxpbWl0LCBjb2xvcnMsIGNocnMsIH0gPSBzZXR0aW5nc1xuICBjb3VudCAgICAgPSAwXG4gICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgcmV0dXJuICQgKCBrZXksIHNlbmQsIGVuZCApID0+XG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBpZiBrZXk/XG4gICAgICBjb3VudCArPSArMVxuICAgICAgaWYgY291bnQgPCBsaW1pdFxuICAgICAgICBrZXlfcnByID0gSE9MTEVSSVRILnVybF9mcm9tX2tleSBkYiwgSE9MTEVSSVRILl9kZWNvZGUgZGIsIGtleVxuICAgICAgICBpZiBjb2xvcnNcbiAgICAgICAgICBsb2cgKCBDTkQuZ3JleSDGkiBjb3VudCApLCAoIENORC5wbHVtIGtleV9ycHIgKSwgKCBDTkQuZ3JleSBrZXkuc2xpY2UgMCwgMTAgKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgZWNobyAoIMaSIGNvdW50ICksIGtleVxuICAgICAgICBzZW5kIGtleVxuICAgICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgICBpbnB1dC5lbWl0ICdlbmQnIGlmIGNvdW50ID49IGxpbWl0XG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBpZiBlbmQ/XG4gICAgICBoZWxwIFwiZHVtcGVkICN7xpIgY291bnR9IGVudHJpZXNcIlxuICAgICAgcHJvY2Vzcy5leGl0KClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIyMgVEFJTlQgY29kZSBkdXBsaWNhdGlvbiAjIyNcbkBfJGR1bXBfcHJlZml4ZXMgPSAoIGRiLCBpbnB1dCwgc2V0dGluZ3MgKSAtPlxuICB7IGxpbWl0LCBjb2xvcnMsIGNocnMsIH0gPSBzZXR0aW5nc1xuICBrZXlfY291bnQgICAgID0gMFxuICBwcmVmaXhfY291bnQgID0gMFxuICBwcmVmaXhlcyAgICAgID0ge31cbiAgdDAgICAgICAgICAgICA9ICtuZXcgRGF0ZSgpXG4gICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgcmV0dXJuICQgKCBrZXksIHNlbmQsIGVuZCApID0+XG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBpZiBrZXk/XG4gICAgICBrZXlfY291bnQgKz0gKzFcbiAgICAgIGlmIGtleV9jb3VudCA8IGxpbWl0XG4gICAgICAgIGtleV9ycHIgPSBIT0xMRVJJVEgudXJsX2Zyb21fa2V5IGRiLCBIT0xMRVJJVEguX2RlY29kZSBkYiwga2V5XG4gICAgICAgIFsgcHJlZml4LCBzdWZmaXhfaWR4LCBdID0gQF9maXJzdF9jaHJzX29mIGtleV9ycHIsIGNocnNcbiAgICAgICAgdW5sZXNzIHByZWZpeGVzWyBwcmVmaXggXT9cbiAgICAgICAgICBwcmVmaXhfY291bnQgICAgICAgKz0gKzFcbiAgICAgICAgICBwcmVmaXhlc1sgcHJlZml4IF0gID0gMVxuICAgICAgICAgIGlmIGNvbG9yc1xuICAgICAgICAgICAgbG9nICggQ05ELmdyZXkgxpIga2V5X2NvdW50ICksICggQ05ELnBsdW0gcHJlZml4ICkgKyAoIENORC5ncmV5IGtleV9ycHJbIHN1ZmZpeF9pZHggLi4gXSApXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZWNobyAoIMaSIGtleV9jb3VudCApLCBwcmVmaXgsIGtleV9ycHJbIHN1ZmZpeF9pZHggLi4gXVxuICAgICAgICAgIHNlbmQga2V5XG4gICAgICAjLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAgIGlucHV0LmVtaXQgJ2VuZCcgaWYga2V5X2NvdW50ID49IGxpbWl0XG4gICAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICBpZiBlbmQ/XG4gICAgICB0MSAgICAgID0gK25ldyBEYXRlKClcbiAgICAgIGR0ICAgICAgPSB0MSAtIHQwXG4gICAgICBkdF9zICAgID0gKCBkdCAvICAxMDAwICkudG9GaXhlZCAzXG4gICAgICBkdF9taW4gID0gKCBkdCAvIDYwMDAwICkudG9GaXhlZCAxXG4gICAgICBoZWxwIFwiZHVtcGVkICN7xpIga2V5X2NvdW50fSBlbnRyaWVzIGluICN7ZHRfc31zICgje2R0X21pbn1taW4pXCJcbiAgICAgIGhlbHAgXCJmb3VuZCAje8aSIHByZWZpeF9jb3VudH0gZGlzdGluY3QgcHJlZml4ZXMgd2l0aCB1cCB0byAje8aSIGNocnN9IGNoYXJhY3RlcnNcIlxuICAgICAgcHJvY2Vzcy5leGl0KClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZHVtcCA9ICggZGIsIHNldHRpbmdzICkgLT5cbiAgeyBtb2RlLCBwcmVmaXgsIH0gPSBzZXR0aW5nc1xuICBzd2l0Y2ggc2V0dGluZ3NbICdtb2RlJyBdXG4gICAgd2hlbiAna2V5cydcbiAgICAgIGlmIHByZWZpeD9cbiAgICAgICAgIyBkZWJ1ZyAnwqk3Zkh2eicsIHJwciBwcmVmaXhcbiAgICAgICAgcXVlcnkgPSBIT0xMRVJJVEgubmV3X3F1ZXJ5IGRiLCBwcmVmaXhcbiAgICAgICAgdXJnZSAnwqlnMXk2SicsIHF1ZXJ5WyAnZ3RlJyBdXG4gICAgICAgIHVyZ2UgJ8KpZzF5NkonLCBxdWVyeVsgJ2x0ZScgXVxuICAgICAgICBpbnB1dCA9IGRiWyAnJXNlbGYnIF0uY3JlYXRlS2V5U3RyZWFtIHF1ZXJ5XG4gICAgICBlbHNlXG4gICAgICAgIGlucHV0ID0gZGJbICclc2VsZicgXS5jcmVhdGVLZXlTdHJlYW0oKVxuICAgICAgd29ya2VyICA9IEBfJGR1bXBfa2V5cyBkYiwgaW5wdXQsIHNldHRpbmdzXG4gICAgd2hlbiAncHJlZml4ZXMnXG4gICAgICBpbnB1dCAgID0gZGJbICclc2VsZicgXS5jcmVhdGVLZXlTdHJlYW0oKVxuICAgICAgd29ya2VyICA9IEBfJGR1bXBfcHJlZml4ZXMgZGIsIGlucHV0LCBzZXR0aW5nc1xuICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yIFwidW5rbm93biBtb2RlICN7cnByIG1vZGV9XCJcbiAgaW5wdXRcbiAgICAucGlwZSB3b3JrZXJcblxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbnVubGVzcyBtb2R1bGUucGFyZW50P1xuXG4gICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZG9jb3B0ICAgID0gKCByZXF1aXJlICdjb2ZmZWVub2RlLWRvY29wdCcgKS5kb2NvcHRcbiAgdmVyc2lvbiAgID0gKCByZXF1aXJlICcuLi9wYWNrYWdlLmpzb24nIClbICd2ZXJzaW9uJyBdXG4gIGZpbGVuYW1lICA9ICggcmVxdWlyZSAncGF0aCcgKS5iYXNlbmFtZSBfX2ZpbGVuYW1lXG4gICAgICAgICAjICN7ZmlsZW5hbWV9IHBvcyBbLS1zYW1wbGVdIFs8cHJlZml4Pl1cbiAgdXNhZ2UgICAgID0gXCJcIlwiXG4gIFVzYWdlOiAje2ZpbGVuYW1lfSA8ZGItcm91dGU+IFstLWxpbWl0PU5dXG4gICAgICAgICAje2ZpbGVuYW1lfSA8ZGItcm91dGU+ICggWzxwcmVmaXg+XSB8IGtleXMgWzxwcmVmaXg+XSB8IHByZWZpeGVzIFs8Y2hycz5dICkgWy0tbGltaXQ9Tl1cblxuICBPcHRpb25zOlxuICAgIC1sLCAtLWxpbWl0XG4gICAgLWgsIC0taGVscFxuICAgIC12LCAtLXZlcnNpb25cbiAgXCJcIlwiXG4gICMjI1xuICAgICAgICAgI3tmaWxlbmFtZX0gcG9zIFstLXNhbXBsZV1cbiAgICAgICAgICN7ZmlsZW5hbWV9IHNvIFstLWRiXSBbLS1saW1pdF0gWy0tc3Rkb3V0XSBbPHByZWZpeD5dXG4gICAgICAgICAje2ZpbGVuYW1lfSBvcyBbLS1kYl0gWy0tbGltaXRdIFstLXN0ZG91dF0gWzxwcmVmaXg+XVxuICAgICAgICAgI3tmaWxlbmFtZX0geFxuICAgICAgICAgI3tmaWxlbmFtZX0geVxuICAgICAgICAgI3tmaWxlbmFtZX0gcSA8cXVlcnkwPiBbK3wtXSA8cXVlcnkxPlxuICAgICAgICAgI3tmaWxlbmFtZX0gc3FsXG4gICAgICAgICAje2ZpbGVuYW1lfSBjb3VudFxuICAjIyNcbiAgY2xpX29wdGlvbnMgPSBkb2NvcHQgdXNhZ2UsIHZlcnNpb246IHZlcnNpb24sIGhlbHA6ICggbGVmdCwgY29sbGVjdGVkICkgLT5cbiAgICB1cmdlIGxlZnRcbiAgICBoZWxwIGNvbGxlY3RlZFxuICAgIGhlbHAgJ1xcbicgKyB1c2FnZVxuICAgIHByb2Nlc3MuZXhpdCgpXG4gICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgZHVtcF9zZXR0aW5ncyA9XG4gICAgbGltaXQ6ICAgICAgICAgICAgSW5maW5pdHlcbiAgICBtb2RlOiAgICAgICAgICAgICAna2V5cydcbiAgICBjb2xvcnM6ICAgICAgICAgICBpZiBwcm9jZXNzLnN0ZG91dC5pc1RUWSB0aGVuIHRydWUgZWxzZSBmYWxzZVxuICAgIGNocnM6ICAgICAgICAgICAgIDNcbiAgIy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICBkdW1wX3NldHRpbmdzWyAncm91dGUnICAgIF0gPSBjbGlfb3B0aW9uc1sgJzxkYi1yb3V0ZT4nIF1cbiAgZHVtcF9zZXR0aW5nc1sgJ2xpbWl0JyAgICBdID0gKCBwYXJzZUludCBsaW1pdCwgMTAgKSBpZiAoIGxpbWl0ID0gY2xpX29wdGlvbnNbICctLWxpbWl0JyBdIClcbiAgZHVtcF9zZXR0aW5nc1sgJ21vZGUnICAgICBdID0gJ3ByZWZpeGVzJyBpZiBjbGlfb3B0aW9uc1sgJ3ByZWZpeGVzJyBdXG4gIGR1bXBfc2V0dGluZ3NbICdjaHJzJyAgICAgXSA9ICggcGFyc2VJbnQgIGNocnMsIDEwICkgaWYgKCAgY2hycyA9IGNsaV9vcHRpb25zWyAgJzxjaHJzPicgXSApXG4gIGR1bXBfc2V0dGluZ3NbICdwcmVmaXgnICAgXSA9IHByZWZpeCBpZiAoIHByZWZpeCA9IGNsaV9vcHRpb25zWyAnPHByZWZpeD4nIF0gKT9cbiAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBkYiA9IEhPTExFUklUSC5uZXdfZGIgZHVtcF9zZXR0aW5nc1sgJ3JvdXRlJyBdXG4gICMgZGVidWcgJ8KpYkVJZUUnLCBjbGlfb3B0aW9uc1xuICAjIGhlbHAgJ8KpYkVJZUUnLCBkdW1wX3NldHRpbmdzXG4gIGhlbHAgXCJ1c2luZyBMZXZlbERCIGF0ICN7ZHVtcF9zZXR0aW5nc1sgJ3JvdXRlJyBdfVwiXG4gIEBkdW1wIGRiLCBkdW1wX3NldHRpbmdzXG5cbiAgIyBkZWJ1ZyAnwqlsSjhuYicsIEhPTExFUklUSC5fZW5jb2RlIG51bGwsIDFcbiAgIyBkZWJ1ZyAnwqlsSjhuYicsIEhPTExFUklUSC5fZW5jb2RlIG51bGwsIFsgMSwgXVxuICAjIGRlYnVnICfCqWxKOG5iJywgSE9MTEVSSVRILl9lbmNvZGUgbnVsbCwgWyAxLCB1bmRlZmluZWQsIF1cbiAgIyBsb2coKVxuICAjIGRlYnVnICfCqWxKOG5iJywgSE9MTEVSSVRILl9lbmNvZGUgbnVsbCwgJzEnXG4gICMgZGVidWcgJ8KpbEo4bmInLCBIT0xMRVJJVEguX2VuY29kZSBudWxsLCBbICcxJywgXVxuICAjIGRlYnVnICfCqWxKOG5iJywgSE9MTEVSSVRILl9xdWVyeV9mcm9tX3ByZWZpeCBudWxsLCAxXG4gICMgZGVidWcgJ8KpbEo4bmInLCBIT0xMRVJJVEguX3F1ZXJ5X2Zyb21fcHJlZml4IG51bGwsIFsgMSwgXVxuICAjIGRlYnVnICfCqWxKOG5iJywgSE9MTEVSSVRILl9xdWVyeV9mcm9tX3ByZWZpeCBudWxsLCAnMSdcbiAgIyBkZWJ1ZyAnwqlsSjhuYicsIEhPTExFUklUSC5fcXVlcnlfZnJvbV9wcmVmaXggbnVsbCwgWyAnMScsIF1cbiAgIyBkZWJ1ZyAnwqlsSjhuYicsIEhPTExFUklUSC5fZW5jb2RlIG51bGwsICdcXHgwMCdcbiAgIyBkZWJ1ZyAnwqlsSjhuYicsIEhPTExFUklUSC5fZW5jb2RlIG51bGwsICdcXHgwMSdcbiAgIyBkZWJ1ZyAnwqlsSjhuYicsIEhPTExFUklUSC5fZW5jb2RlIG51bGwsICdcXHgwMidcbiAgIyBsb2coKVxuXG4gICMgZm9yIGNpZCBpbiBbIDB4MDAgLi4gMHhmZiBdXG4gICMgICBkZWJ1ZyAnwqlsSjhuYicsICggJzB4JyArICggaWYgY2lkIDw9IDB4ZiB0aGVuICcwJyBlbHNlICcnICkgKyBjaWQudG9TdHJpbmcgMTYgKSwgSE9MTEVSSVRILl9lbmNvZGUgbnVsbCwgWyBTdHJpbmcuZnJvbUNvZGVQb2ludCBjaWQsIF1cbiAgIyBkZWJ1ZyAnwql2ZmtreCcsIEhPTExFUklUSC5fZGVjb2RlIG51bGwsIEhPTExFUklUSC5lbmNvZGUgbnVsbCwgK0luZmluaXR5XG4gICMgZGVidWcgJ8KpdmZra3gnLCBIT0xMRVJJVEguX2RlY29kZSBudWxsLCBIT0xMRVJJVEguZW5jb2RlIG51bGwsIC1JbmZpbml0eVxuICAjIGRlYnVnICfCqXZma2t4JywgSE9MTEVSSVRILl9kZWNvZGUgbnVsbCwgSE9MTEVSSVRILmVuY29kZSBudWxsLCBudWxsXG4gICMgZGVidWcgJ8KpdmZra3gnLCBIT0xMRVJJVEguX2RlY29kZSBudWxsLCBIT0xMRVJJVEguZW5jb2RlIG51bGwsIHVuZGVmaW5lZFxuICAjIENORC5saXN0ZW5fdG9fa2V5cyAoIFAuLi4gKSAtPlxuICAjICAgZGVidWcgJ8KpV09tbGonLCBQXG4gICMgcHJvY2Vzcy5zdGRpbi5yZXN1bWUoKVxuXG4gICMgZm9yIHRleHQgaW4gWyAnYWJjJywgJ+S4reWci+eah+W4nScsICdh8KqchGInLCBdXG4gICMgICBmb3IgbiBpbiBbIDAgLi4gNSBdXG4gICMgICAgIGRlYnVnICfCqURMT1RzJywgbiwgcnByIEBfZmlyc3RfY2hyc19vZiB0ZXh0LCBuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iXX0=